(this.webpackJsonpBukit=this.webpackJsonpBukit||[]).push([[0],{105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l),o=a(14),u=r.a.createContext(),s=a(3),i={stateprop1:!1},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{stateprop1:!0});case"FAILURE":return Object(s.a)(Object(s.a)({},e),{},{stateprop1:!1});default:throw new Error}},d={is_authenticated:!1,db_profile:null,profile:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{is_authenticated:!0});case"LOGIN_FAILURE":return Object(s.a)(Object(s.a)({},e),{},{is_authenticated:!1});case"ADD_PROFILE":return Object(s.a)(Object(s.a)({},e),{},{profile:t.payload});case"REMOVE_PROFILE":return Object(s.a)(Object(s.a)({},e),{},{profile:null});case"SET_DB_PROFILE":return Object(s.a)(Object(s.a)({},e),{},{db_profile:t.payload});case"REMOVE_DB_PROFILE":return Object(s.a)(Object(s.a)({},e),{},{db_profile:null});default:return e}},f={user_textChange:"",user_textSubmit:""},p=function(e,t){switch(t.type){case"USER_INPUT_CHANGE":return Object(s.a)(Object(s.a)({},e),{},{user_textChange:t.payload});case"USER_INPUT_SUBMIT":return Object(s.a)(Object(s.a)({},e),{},{user_textSubmit:t.payload});default:throw new Error}},E={resources:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DB_RESOURCES":return Object(s.a)(Object(s.a)({},e),{},{resources:t.payload});case"REMOVE_DB_RESOURCES":return Object(s.a)(Object(s.a)({},e),{},{resources:[]});default:return e}},g=a(7),v=a(20),_=Object(v.a)(),O=a(9),j=a.n(O),x=function(){var e=Object(n.useContext)(u);return Object(n.useEffect)((function(){if(e.authObj.isAuthenticated()){var t=e.authObj.userProfile;e.handleUserLogin(),e.handleUserAddProfile(t),j.a.post("/api/post/userprofiletodb",t).then(j.a.get("/api/get/userprofiletodb",{params:{email:t.profile.email}}).then((function(t){return e.handleAddDBProfile(t.data)}))).then(_.replace("/"))}else e.handleUserLogout(),e.handleUserRemoveProfile(),e.handleUserRemoveProfile(),_.replace("/")}),[e.authObj.userProfile,e]),r.a.createElement("div",null)},y=function(e){return r.a.createElement("div",{className:"bg-blue-200"},"Home")},S=a(12),w=function(){var e=Object(n.useContext)(u),t=Object(n.useState)(!1),a=Object(o.a)(t,2),l=a[0],c=a[1];return r.a.createElement("nav",{className:"flex items-center justify-between flex-wrap bg-red-500 p-6 px-12 xl:px-24"},r.a.createElement("div",{className:"flex items-center flex-shrink-0 text-white mr-6"},r.a.createElement("svg",{className:"fill-current h-8 w-8 mr-2",viewBox:"0 0 65 65",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M63.95,15.786c0,4.006-12.963,7.238-28.949,7.238 c-15.988,0-28.951-3.232-28.951-7.238l9.65,43.839c0,2.672,8.637,4.826,19.301,4.826c10.662,0,19.299-2.154,19.299-4.826l0,0      L63.95,15.786z"}),r.a.createElement("path",{d:"M63.95,12.786c0-4.004-12.963-7.237-28.949-7.237 c-15.988,0-28.951,3.233-28.951,7.237c0,4.006,12.963,7.238,28.951,7.238C50.987,20.024,63.95,16.792,63.95,12.786L63.95,12.786      z"})),r.a.createElement("span",{className:"font-semibold text-xl tracking-tight"},"Bukit")),r.a.createElement("div",{className:"block lg:hidden"},r.a.createElement("button",{onClick:function(){return c(!l)},className:"flex px-3 py-2 border rounded text-red-100 border-red-400 hover:text-white hover:border-white"},r.a.createElement("svg",{className:"fill-current h-3 w-3",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"Menu"),r.a.createElement("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})))),r.a.createElement("div",{className:"".concat(l?"block":"hidden"," w-full block flex-grow lg:flex lg:items-center lg:w-auto")},r.a.createElement("div",{className:"text-sm lg:flex-grow"}),r.a.createElement(S.a,{to:"/",className:"block mt-4 lg:inline-block lg:mt-0 text-red-100 hover:text-white mr-4"},"Home"),r.a.createElement(S.a,{to:"/resources",className:"block mt-4 lg:inline-block lg:mt-0 text-red-100 hover:text-white mr-4"},"Resources"),r.a.createElement(S.a,{to:"/profile",className:"block mt-4 lg:inline-block lg:mt-0 text-red-100 hover:text-white mr-4"},"Profile")),r.a.createElement("div",null,e.authState?r.a.createElement("button",{className:"".concat(l?"block":"hidden"," inline-block text-sm px-4 py-2 leading-none border rounded text-white border-white hover:border-transparent hover:text-red-500 hover:bg-white mt-4 lg:mt-0"),onClick:function(){return e.authObj.logout()}},"Logout"):r.a.createElement("button",{className:"".concat(l?"block":"hidden"," inline-block text-sm px-4 py-2 leading-none border rounded text-white border-white hover:border-transparent hover:text-red-500 hover:bg-white mt-4 lg:mt-0"),onClick:function(){return e.authObj.login()}},"Login")))},k=function(e){return r.a.createElement("div",{className:"bg-blue-200"},"Callback")},C=function(e){var t=Object(n.useContext)(u);return r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"px-8 py-12 max-w-md mx-auto sm:max-w-xl lg:max-w-full lg:w-1/2 lg:py-24 lg:px-12"},r.a.createElement("div",{className:"xl:max-w-lg xl:ml-auto"},r.a.createElement("img",{className:"mt-6 rounded-lg shadow-xl sm:mt-8 sm:h-64 sm:w-full sm:object-cover sm:object-center lg:hidden",src:"https://source.unsplash.com/user/itfeelslikefilm",alt:"Random Unsplash"}),r.a.createElement("h1",{className:"mt-6 text-2xl font-bold text-gray-900 leading-tight sm:mt-8 sm:text-4xl lg:text-3xl"},"Find your way to learn.",r.a.createElement("br",{className:"hidden lg:inline"}),r.a.createElement("span",{className:"text-red-500"}," Dive into knowledge.")),r.a.createElement("p",{className:"mt-2 text-gray-600 sm:mt-4 sm:text-xl"},"Bukit helps you find resources to plan what you want to learn next. Dive into your favorite topic and find what helps you learn best."),r.a.createElement("div",{className:"mt-4 sm:mt-6"},r.a.createElement("div",{className:" py-12 max-w-md sm:max-w-xl lg:max-w-full lg:w-1/2"},r.a.createElement("button",{onClick:function(){return t.authObj.login()},className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"},"Signup"))))),r.a.createElement("div",{className:"hidden lg:block lg:w-1/2 lg:relative"},r.a.createElement("img",{className:"absolute inset-0 h-full w-full object-cover object-center",src:"https://source.unsplash.com/user/itfeelslikefilm",alt:"A bunch of books layed out"})))},N=a(19),R=a(166),P=a(154),I=a(152),U=a(153),D=a(151),M=a(164),T=function(){var e=Object(n.useContext)(u),t=Object(n.useState)({open:!1,resource_id:null,resources:[]}),a=Object(o.a)(t,2),l=a[0],c=a[1];Object(n.useEffect)((function(){var t=!0,a=e.dbProfileState[0].uid;return j.a.get("/api/get/userresources",{params:{user_id:a}}).then((function(e){t&&c(Object(s.a)(Object(s.a)({},l),{},{resources:Object(N.a)(e.data)}))})).catch((function(e){return console.log(e)})),function(){return t=!1}}),[e.dbProfileState]);var i=function(){c({open:!1,resource_id:null})},m=function(e){return r.a.createElement("div",{className:"justify-center"},r.a.createElement("h1",null,e.profile.profile.nickname),r.a.createElement("br",null),r.a.createElement("img",{src:e.profile.profile.picture,alt:""}),r.a.createElement("br",null),r.a.createElement("h4",null," ",e.profile.profile.email),r.a.createElement("br",null),r.a.createElement("h5",null," ",e.profile.profile.name," "),r.a.createElement("br",null),r.a.createElement("h6",null," Email Verified: "),e.profile.profile.email_verified?r.a.createElement("p",null,"Yes"):r.a.createElement("p",null,"No"),r.a.createElement("br",null))},d=function(e){return r.a.createElement("div",null,r.a.createElement(S.a,{to:{pathname:"/resource/"+e.resource.rid,state:{resource:e}}},e.resource.title),r.a.createElement("div",{className:"flex content-center"},r.a.createElement("div",null,e.resource.date_created),r.a.createElement("div",null,r.a.createElement(S.a,{to:{pathname:"/editresource/"+e.resource.rid,state:{resource:e}}},r.a.createElement("button",null,"Edit")),r.a.createElement("button",{onClick:function(){return t=e.resource.rid,void c({open:!0,resource_id:t});var t}},"Delete"))),r.a.createElement("div",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("span",{style:{overflow:"hidden"}}," ",e.resource.body," ")))};return r.a.createElement("div",{className:"p-24"},r.a.createElement("div",null,r.a.createElement(S.a,{to:{pathname:"/showmessages/"+e.dbProfileState[0].uid}},r.a.createElement(M.a,{variant:"contained",color:"primary",type:"submit"},"Show Messages")),r.a.createElement(m,{profile:e.profileState})),r.a.createElement("div",null,l.resources?l.resources.map((function(e){return r.a.createElement(d,{resource:e,key:e.rid})})):null),r.a.createElement(R.a,{open:l.open,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(D.a,{id:"alert-dialog-title"}," Confirm Delete? "),r.a.createElement(I.a,null,r.a.createElement(U.a,{id:"alert-dialog-description"},"Deleteing Resource"),r.a.createElement(P.a,null,r.a.createElement(M.a,{onClick:function(){return function(){var e=l.resource_id;j.a.delete("api/delete/resourcecomments",{data:{resource_id:e}}).then((function(){return j.a.delete("/api/delete/resource",{data:{resource_id:e}}).then((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)})).then((function(){return i()})).then((function(){return setTimeout((function(){return _.replace("/")}),700)}))}()}},"Agree"),r.a.createElement(M.a,{onClick:function(){return i()}},"Cancel")))))},A=a(50),B=a.n(A),L=a(155),F=a(157),H=a(156),z=function(e){var t=Object(n.useState)({}),a=Object(o.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)([]),i=Object(o.a)(u,2),m=i[0],d=i[1];Object(n.useEffect)((function(){var t=e.location.state.resource.resource.author;j.a.get("/api/get/otheruserprofilefromdb",{params:{username:t}}).then((function(e){return c(Object(s.a)({},e.data))})).catch((function(e){console.log(e)})),j.a.get("/api/get/otheruserresources",{params:{username:t}}).then((function(e){return d(Object(N.a)(e.data))})).catch((function(e){console.log(e)})),window.scrollTo({top:0,left:0})}),[e.location.state.resource.resource.author]);var b=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"FlexRow"},r.a.createElement("h1",null,e.profile.username)),r.a.createElement("div",{className:"FlexRow"},r.a.createElement(S.a,{to:{pathname:"/sendmessage/",state:{props:e}}},r.a.createElement(M.a,{variant:"contained",color:"primary",type:"submit"},"Send Message"))))},f=function(e){return r.a.createElement("div",null,r.a.createElement(L.a,{className:"CardStyles"},r.a.createElement(H.a,{title:r.a.createElement(S.a,{to:{pathname:"/resource/"+e.resource.rid,state:{resource:e}}},e.resource.title),subheader:r.a.createElement("div",null,r.a.createElement("div",null,B()(e.resource.date_created).format("MMMM Do, YYYY | h:mm a")),r.a.createElement("div",null,e.resource.author))}),r.a.createElement(F.a,null,r.a.createElement("span",{style:{overflow:"hidden"}},e.resource.body," "))))};return r.a.createElement("div",null,r.a.createElement("div",{className:"FlexRow"},l?r.a.createElement(b,{profile:l}):null),r.a.createElement("br",null),r.a.createElement("hr",{className:"style-two"}),r.a.createElement("h3",null," Latest Activity: "),r.a.createElement("div",{className:"FlexColumn"},m?m.map((function(e){return r.a.createElement("div",{key:e.rid},r.a.createElement(f,{resource:e}),r.a.createElement("br",null))})):null))},V=a(163),Y=function(e){var t=Object(n.useContext)(u);return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var n=e.location.state.props.profile[0].username,r={message_sender:t.dbProfileState[0].username,message_to:n,title:a.target.title.value,body:a.target.body.value};console.log(e),j.a.post("/api/post/messagetodb",r).then((function(e){return console.log(e)})).catch((function(e){console.log(e)})).then(setTimeout((function(){_.replace("/")}),700))}},r.a.createElement(V.a,{id:"title",label:"Title",margin:"normal"}),r.a.createElement("br",null),r.a.createElement(V.a,{id:"body",multiline:!0,rows:"4",margin:"normal"}),r.a.createElement("br",null),r.a.createElement(M.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("button",{className:"CancelButton",onClick:function(){return _.replace("/")}}," Cancel ")))},J=a(160),G=a(162),q=a(159),W=a(161),Q=a(158),Z=function(e){var t=Object(n.useContext)(u),a=Object(n.useState)([]),l=Object(o.a)(a,2),c=l[0],s=l[1];Object(n.useEffect)((function(){var e=t.dbProfileState[0].username;j.a.get("/api/get/usermessages",{params:{username:e}}).then((function(e){return s(Object(N.a)(e.data))})).catch((function(e){console.log(e)}))}),[]);var i=function(e){return r.a.createElement(Q.a,null,r.a.createElement(q.a,null,r.a.createElement("p",null," ",r.a.createElement("strong",null,"From: "),"  ",e.message.message_sender," "),r.a.createElement("p",null," ",r.a.createElement("strong",null,"Title "),"   ",e.message.message_title," "),r.a.createElement("p",null,r.a.createElement("strong",null," Message:"),"  ",e.message.message_body," "),r.a.createElement("small",null," ",e.message.date_created," "),r.a.createElement("br",null),r.a.createElement(S.a,{to:{pathname:"/replytomessage",state:{props:e}}},r.a.createElement("button",null,"Reply")),r.a.createElement("button",{onClick:function(){return m(e.message.mid)}}," Delete "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return _.goBack()}}," Cancel ")))},m=function(e){j.a.delete("/api/delete/usermessage",{data:{mid:e}}).then((function(e){return console.log(e)})).catch((function(e){console.log(e)})).then((function(){return setTimeout((function(){_.replace("/")}),700)}))};return r.a.createElement("div",null,r.a.createElement("div",{className:"FlexRow"},r.a.createElement(J.a,null,r.a.createElement(W.a,null,r.a.createElement(Q.a,null,r.a.createElement(q.a,null," ",r.a.createElement("strong",null," Messages ")," "))),r.a.createElement(G.a,null,c?c.map((function(e){return r.a.createElement(i,{key:e.mid,message:e})})):null))))},K=function(e){var t=Object(n.useContext)(u);return r.a.createElement("div",null,r.a.createElement("h2",null," Message: "),r.a.createElement("div",{className:"FlexColumn"},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,e.location.state.props.message.message_title))),r.a.createElement("div",null,r.a.createElement("p",null,e.location.state.props.message.message_body)),r.a.createElement("div",null,r.a.createElement("small",null," By: ",e.location.state.props.message.message_sender))),r.a.createElement("div",{className:"FlexRow"},r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var n=e.location.state.props.message.message_sender,r={message_sender:t.dbProfileState[0].username,message_to:n,title:a.target.title.value,body:a.target.body.value};j.a.post("/api/post/messagetodb",r).then((function(e){return console.log(e)})).catch((function(e){console.log(e)})).then(setTimeout((function(){_.replace("/")}),700))}},r.a.createElement(V.a,{id:"title",label:"Title",margin:"normal"}),r.a.createElement("br",null),r.a.createElement(V.a,{id:"body",multiline:!0,rows:"4",margin:"normal"}),r.a.createElement("br",null),r.a.createElement(M.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),r.a.createElement("br",null)),r.a.createElement("div",{className:"FlexRow"},r.a.createElement("button",{className:"CancelButton",onClick:function(){return _.replace("/")}}," Cancel ")))},X=["indigo","red","orange","blue","green","teal","purple"],$=function(e){var t=X[e.resource.title.charCodeAt(0)%7];return r.a.createElement("div",{className:"md:flex shadow-lg rounded p-4 my-4 w-1/3"},r.a.createElement("div",{className:"md:flex-shrink-0 relative"},r.a.createElement("div",{className:"flex h-10 w-10"},r.a.createElement("div",{className:"mx-3 my-1"},e.resource.likes),r.a.createElement("svg",{className:"absolute z-1 text-center h-10 w-10 text-red-500 cursor-pointer fill-current",viewBox:"0 0 28 27"},r.a.createElement("path",{d:"M12.76 3.76a6 6 0 0 1 8.48 8.48l-8.53 8.54a1 1 0 0 1-1.42 0l-8.53-8.54a6 6 0 0 1 8.48-8.48l.76.75.76-.75zm7.07 7.07a4 4 0 1 0-5.66-5.66l-1.46 1.47a1 1 0 0 1-1.42 0L9.83 5.17a4 4 0 1 0-5.66 5.66L12 18.66l7.83-7.83z"}))),void 0!==typeof e.resource.picture?r.a.createElement("div",{className:"w-48 h-36 bg-".concat(t,"-400 text-").concat(t,"-200 font-serif text-5xl font-bold overflow-hidden whitespace-no-wrap")},e.resource.title):r.a.createElement("img",{className:"w-48 h-34 object-cover",src:"https://images.unsplash.com/photo-1556740738-b6a63e27c4df?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=448&q=80",alt:"Sunset in the mountains"})),r.a.createElement("div",{className:"mt-4 md:mt-0 md:ml-6"},r.a.createElement(S.a,{to:{pathname:"/resource/"+e.resource.rid,state:{resource:e}}},r.a.createElement("div",{className:"uppercase tracking-wide text-lg text-gray-900 font-bold"},e.resource.title)),r.a.createElement("div",{className:"block mt-1 text-sm leading-tight text-gray-900"},B()(e.resource.date_created).format("MMMM Do, YYYY | h:mm a")),r.a.createElement("div",{className:"text-sm hover:underline"},r.a.createElement(S.a,{to:{pathname:"/user/"+e.resource.author,state:{resource:e}}},"By: "+e.resource.author)),r.a.createElement("div",{className:"mt-2 text-gray-600"}," ",e.resource.body," ")))},ee=function(e){var t=Object(n.useContext)(u),a=Object(n.useState)({resources:[],fetched:!1,first_page_load:!1,pages_slice:[1,2,3,4,5],max_page:null,items_per_page:3,currentPage:1,num_resources:null,resources_slice:null,resources_search:[],resources_per_page:3}),l=Object(o.a)(a,2),c=l[0],i=l[1];Object(n.useEffect)((function(){if(t.resourcesState||j.a.get("/api/get/allresources").then((function(e){return t.handleAddResources(e.data)})).catch((function(e){return console.log(e)})),t.resourcesState&&!c.fetched){var e=1*c.resources_per_page,a=e-c.resources_per_page,n=Math.ceil(t.resourcesState.length/c.resources_per_page);i(Object(s.a)(Object(s.a)({},c),{},{fetched:!0,resources:Object(N.a)(t.resourcesState),num_resources:t.resourcesState.length,max_page:n,resources_slice:t.resourcesState.slice(a,e)}))}}),[t,c]),Object(n.useEffect)((function(){var e=3*c.currentPage,t=e-3;i(Object(s.a)(Object(s.a)({},c),{},{resources_slice:c.resources.slice(t,e)}))}),[c.currentPage]);var m=function(e){window.scrollTo({top:0,left:0,behavior:"smooth"});var t=e+1,a=e-1;e>2&&e<c.max_page-1&&i(Object(s.a)(Object(s.a)({},c),{},{currentPage:e,pages_slice:[a-1,a,e,t,t+1]})),2===e&&i(Object(s.a)(Object(s.a)({},c),{},{currentPage:e,pages_slice:[a,e,t,t+1,t+2]})),1===e&&i(Object(s.a)(Object(s.a)({},c),{},{currentPage:e,pages_slice:[e,t,t+1,t+2,t+3]})),e===c.max_page&&i(Object(s.a)(Object(s.a)({},c),{},{currentPage:e,pages_slice:[a-3,a-2,a-1,a,e]})),e===c.max_page-1&&i(Object(s.a)(Object(s.a)({},c),{},{currentPage:e,pages_slice:[a-2,a-1,a,e,t]}))};return r.a.createElement("div",{className:"p-24"},r.a.createElement("div",{style:{opacity:c.opacity,transition:"opacity 2s ease"}},t.authState?r.a.createElement(S.a,{to:"/addresource"},r.a.createElement("button",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"},"Add Resource")):r.a.createElement(S.a,{to:"/signup"},r.a.createElement("button",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"},"Sign Up To Add Resource"))),r.a.createElement("br",null),r.a.createElement(V.a,{id:"search",label:"Search",margin:"normal",onChange:function(e){i(Object(s.a)(Object(s.a)({},c),{},{resources_search:[]}));var t=e.target.value;j.a.get("/api/get/searchresource",{params:{search_query:t}}).then((function(e){return 0!==e.data.length?(t=e.data,i(Object(s.a)(Object(s.a)({},c),{},{resources_search:[]})),void i(Object(s.a)(Object(s.a)({},c),{},{resources_search:Object(N.a)(t)}))):null;var t})).catch((function(e){console.log(e)}))}}),r.a.createElement("br",null),r.a.createElement("div",{className:"flex space-x-4"},c.resources_search?c.resources_search.map((function(e){return r.a.createElement($,{key:e.rid+1e3,resource:e})})):null),r.a.createElement("h1",{className:"text-3xl font-bold"},"Resources"),r.a.createElement("div",{className:"flex space-x-4"},c.resources_slice?c.resources_slice.map((function(e){return r.a.createElement($,{key:e.rid,resource:e})})):null),r.a.createElement("div",null,r.a.createElement("div",{className:"FlexRow"},r.a.createElement("button",{onClick:function(){return m(1)}}," First "),r.a.createElement("button",{onClick:function(){return m(c.currentPage-1)}}," ","Prev"," "),c.pages_slice.map((function(e){return r.a.createElement("div",{onClick:function(){return m(e)},className:c.currentPage===e?"pagination-active":"pagination-item",key:e},e)})),r.a.createElement("button",{onClick:function(){return m(c.currentPage+1)}}," ","Next"," "),r.a.createElement("button",{onClick:function(){return m(c.max_page)}}," ","Last"," "))))},te=function(){var e=Object(n.useContext)(u);return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=e.dbProfileState[0].uid,n=e.dbProfileState[0].username,r={title:t.target.title.value,body:t.target.body.value,username:n,uid:a};j.a.post("/api/post/resourcetodb",r).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})).then(setTimeout((function(){return _.replace("/resources")}),700))}},r.a.createElement(V.a,{id:"title",label:"Title",margin:"normal"}),r.a.createElement("br",null),r.a.createElement(V.a,{id:"body",label:"Body",multiline:!0,rowsMax:"4",margin:"normal"}),r.a.createElement("br",null),r.a.createElement(V.a,{id:"url",label:"URL",margin:"normal"}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"}," Submit ")),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return _.replace("/resources")}}," Cancel "))},ae=function(e){var t=Object(n.useContext)(u),a=Object(n.useState)({comment:"",fetched:!1,cid:0,delete_comment_id:0,edit_comment_id:0,edit_comment:"",comments_arr:null,cur_user_id:null,like_resource:!0,likes:0,like_user_ids:[],resource_title:null,resource_body:null,resource_author:null,resource_id:null}),l=Object(o.a)(a,2),c=l[0],i=l[1];Object(n.useEffect)((function(){e.location.state&&!c.fetched&&i(Object(s.a)(Object(s.a)({},c),{},{fetched:!0,likes:e.location.state.resource.resource.likes,like_user_ids:e.location.state.resource.resource.like_user_id,resource_title:e.location.state.resource.resource.title,resource_body:e.location.state.resource.resource.body,resource_author:e.location.state.resource.resource.author,resource_id:e.location.state.resource.resource.rid}))}),[c,e.location]),Object(n.useEffect)((function(){if(!e.location.state&&!c.fetched){console.log("yyyy");var t=e.location.pathname.substring(6);j.a.get("/api/get/resource",{params:{resource_id:t}}).then((function(e){return 0!==e.data.length?i(Object(s.a)(Object(s.a)({},c),{},{fetched:!0,likes:e.data[0].likes,like_user_ids:e.data[0].like_user_id,resource_title:e.data[0].title,resource_body:e.data[0].body,resource_author:e.data[0].author,resource_id:e.data[0].rid})):null})).catch((function(e){return console.log(e)}))}}),[c,e.location]),Object(n.useEffect)((function(){if(!c.comments_arr&&e.location.state){var t=e.location.pathname.substring(10);j.a.get("/api/get/allresourcecomments",{params:{resource_id:t}}).then((function(e){return 0!==e.data.length?i(Object(s.a)(Object(s.a)({},c),{},{comments_arr:Object(N.a)(e.data)})):null})).catch((function(e){return console.log(e)}))}}),[e.location,c]);var m=function(){i(Object(s.a)(Object(s.a)({},c),{},{edit_comment_id:0}))},d=function(e){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("p",null,e.comment.comment," "),r.a.createElement("small",null,"Just Now"===e.comment.date_created?r.a.createElement("div",null," ",e.comment.isEdited?r.a.createElement("span",null," Edited "):r.a.createElement("span",null," Just Now ")):e.comment.date_created),r.a.createElement("p",null," By: ",e.comment.author," ")),r.a.createElement("div",null,e.cur_user_id===e.comment.user_id?e.isEditing?r.a.createElement("form",{onSubmit:function(t,a){return f(t,e.comment.cid)}},r.a.createElement("input",{autoFocus:!0,name:"edit_comment",id:"edited_comment",label:"Comment",value:c.edit_comment,onChange:b}),r.a.createElement("br",null),r.a.createElement(M.a,{type:"submit"},"Agree"),r.a.createElement(M.a,{type:"button",onClick:m},"Cancel"),r.a.createElement("button",{onClick:function(){return p(e.comment.cid)}},"Delete")):r.a.createElement("div",null,r.a.createElement(M.a,{onClick:function(){return i(Object(s.a)(Object(s.a)({},c),{},{edit_comment_id:e.comment.cid,edit_comment:e.comment.comment}))}},"Edit")):null))},b=function(e){return i(Object(s.a)(Object(s.a)({},c),{},{edit_comment:e.target.value}))},f=function(e,a){e.preventDefault(),console.log(e),console.log(a);var n=e.target.edited_comment.value,r=a,l=c.resource_id,o=t.dbProfileState[0].uid,u=t.dbProfileState[0].username,m={cid:r,comment:n,user_id:o,author:u,date_created:"Just Now",isEdited:!0},d={cid:r,comment:n,resource_id:l,user_id:o,username:u};j.a.put("/api/put/commenttodb",d).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),function(e){var t=c.comments_arr.findIndex((function(t){return t.cid===e.cid})),a=Object(N.a)(c.comments_arr);a[t]=e,setTimeout((function(){return i(Object(s.a)(Object(s.a)({},c),{},{comments_arr:Object(N.a)(a),edit_comment_id:0}))}),100)}(m)},p=function(e){var t=e;console.log(e),j.a.delete("/api/delete/comment",{data:{comment_id:t}}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),function(e){i(Object(s.a)(Object(s.a)({},c),{},{delete_comment_id:e}));var t=c.comments_arr.filter((function(t){return t.cid!==e}));i(Object(s.a)(Object(s.a)({},c),{},{comments_arr:t}))}(e)};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Resource"),c.comments_arr||e.location.state?r.a.createElement("div",null,r.a.createElement("p",null,c.resource_title),r.a.createElement("p",null,c.resource_body),r.a.createElement("p",null,c.resource_author)):null,r.a.createElement("div",{style:{cursor:"pointer"},onClick:t.authState?function(){return function(){var e=t.dbProfileState[0].uid,a={uid:e,resource_id:c.resource_id};console.log(a),c.like_user_ids.includes(e)||j.a.put("/api/put/likes",a).then(!c.like_user_ids.includes(e)&&c.like_resource?i(Object(s.a)(Object(s.a)({},c),{},{likes:c.likes+1,like_resource:!1})):null).catch((function(e){return console.log(e)}))}()}:function(){return _.replace("/signup")}},r.a.createElement("svg",{className:"h-12 w-12 text-teal-500 fill-current",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M8.128 19.825a1.586 1.586 0 0 1-1.643-.117 1.543 1.543 0 0 1-.53-.662 1.515 1.515 0 0 1-.096-.837l.736-4.247-3.13-3a1.514 1.514 0 0 1-.39-1.569c.09-.271.254-.513.475-.698.22-.185.49-.306.776-.35L8.66 7.73l1.925-3.862c.128-.26.328-.48.577-.633a1.584 1.584 0 0 1 1.662 0c.25.153.45.373.577.633l1.925 3.847 4.334.615c.29.042.562.162.785.348.224.186.39.43.48.704a1.514 1.514 0 0 1-.404 1.58l-3.13 3 .736 4.247c.047.282.014.572-.096.837-.111.265-.294.494-.53.662a1.582 1.582 0 0 1-1.643.117l-3.865-2-3.865 2z"})),r.a.createElement("small",{className:"notification-num-showresource"},c.likes))),r.a.createElement("div",null,r.a.createElement("h2",null," Comments:"),c.comments_arr?c.comments_arr.map((function(e){return r.a.createElement(d,{comment:e,cur_user_id:t.dbProfileState?t.dbProfileState[0].uid:null,key:e.cid,isEditing:e.cid===c.edit_comment_id})})):null),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(Object(s.a)(Object(s.a)({},c),{},{comment:""}));var a=e.target.comment.value,n=t.dbProfileState[0].uid,r=t.dbProfileState[0].username,l=c.resource_id,o={cid:Math.floor(1e3*Math.random()),comment:a,user_id:n,author:r,date_created:"Just Now"},u={comment:e.target.comment.value,resource_id:l,user_id:n,username:r};j.a.post("/api/post/commenttodb",u).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),window.scroll({top:0,left:0,behavior:"smooth"}),function(e){c.comments_arr?i(Object(s.a)(Object(s.a)({},c),{},{comments_arr:[e].concat(Object(N.a)(c.comments_arr))})):i(Object(s.a)(Object(s.a)({},c),{},{comments_arr:[e]}))}(o)}},r.a.createElement(V.a,{id:"comment",label:"Comment",margin:"normal"}),r.a.createElement("br",null),r.a.createElement("div",null,console.log("Loaded Res")),t.authState?r.a.createElement(M.a,{variant:"contained",color:"primary",type:"submit"},"Submit"):r.a.createElement(S.a,{to:"/signup"},r.a.createElement(M.a,{variant:"contained",color:"primary"},"Signup to Comment")))),r.a.createElement("div",null))},ne=function(e){var t=Object(n.useContext)(u),a=Object(n.useState)({title:e.location.state.resource.resource.title,body:e.location.state.resource.resource.body}),l=Object(o.a)(a,2),c=l[0],i=l[1];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var n=t.dbProfileState[0].uid,r=t.dbProfileState[0].username,l=e.location.state.resource.resource.rid,c={title:a.target.title.value,body:a.target.body.value,rid:l,uid:n,username:r};j.a.put("/api/put/resource",c).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})).then(setTimeout((function(){return _.replace("/profile")}),700))}},r.a.createElement(V.a,{id:"title",label:"title",margin:"normal",value:c.title,onChange:function(e){i(Object(s.a)(Object(s.a)({},c),{},{title:e.target.value}))}}),r.a.createElement("br",null),r.a.createElement(V.a,{id:"body",label:"body",multiline:!0,rows:"4",margin:"normal",value:c.body,onChange:function(e){i(Object(s.a)(Object(s.a)({},c),{},{body:e.target.value}))}}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"}," Submit ")),r.a.createElement("br",null),r.a.createElement(M.a,{onClick:function(){return _.goBack()}}," Cancel "))},re=function(e){var t=e.component,a=e.auth;return r.a.createElement(g.b,{render:function(e){return!0===a?r.a.createElement(t,Object.assign({auth:a},e)):r.a.createElement(g.a,{to:{pathname:"/signup"}})}})},le=function(){var e=Object(n.useContext)(u);return r.a.createElement("div",{className:"bg-blue-200 h-screen"},r.a.createElement(g.c,{history:_},r.a.createElement(w,null),r.a.createElement("div",{className:"justify-center bg-gray-100"},r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/",component:y}),r.a.createElement(g.b,{path:"/authcheck",component:x}),r.a.createElement(g.b,{path:"/signup",component:C}),r.a.createElement(g.b,{path:"/resources",component:ee}),r.a.createElement(g.b,{path:"/resource/:rid",component:ae}),r.a.createElement(g.b,{path:"/editresource/:rid",component:ne}),r.a.createElement(g.b,{path:"/addresource",component:te}),r.a.createElement(g.b,{path:"/user/:name",component:z}),r.a.createElement(re,{path:"/profile",auth:e.authState,component:T}),r.a.createElement(re,{path:"/sendmessage",auth:e.authState,component:Y}),r.a.createElement(re,{path:"/showmessages/:id",auth:e.authState,component:Z}),r.a.createElement(re,{path:"/replytomessage",auth:e.authState,component:K}),r.a.createElement(re,{path:"/profile",auth:e.authState,component:T}),r.a.createElement(g.b,{path:"/callback",render:function(t){return e.handleAuth(t),r.a.createElement(k,null)}})))))},ce=a(72),oe=a(73),ue=new function e(){var t=this;Object(ce.a)(this,e),this.auth0=new oe.a.WebAuth({domain:"dev-f4ftyeji.auth0.com",clientID:"fMBeejrhcLa6G2YUtRfIy3ZSMvnV0p03",redirectUri:"http://52.53.224.137/callback",responseType:"token id_token",scope:"openid profile email"}),this.userProfile={},this.login=function(){t.auth0.authorize()},this.handleAuth=function(){t.auth0.parseHash((function(e,a){if(a){localStorage.setItem("access_token",a.accessToken),localStorage.setItem("id_token",a.idToken);var n=JSON.stringify(1e3*a.expiresIn+(new Date).getTime());localStorage.setItem("expiresAt",n),t.getProfile(),setTimeout((function(){_.replace("/authcheck")}),600)}else console.log(e)}))},this.getAccessToken=function(){return localStorage.getItem("access_token")?localStorage.getItem("access_token"):null},this.getProfile=function(){var e=t.getAccessToken();e&&t.auth0.client.userInfo(e,(function(e,a){a&&(t.userProfile={profile:a})}))},this.logout=function(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expiresAt"),setTimeout((function(){_.replace("/authcheck")}),200)},this.isAuthenticated=function(){var e=JSON.parse(localStorage.getItem("expiresAt"));return(new Date).getTime()<e}},se=function(e){var t=Object(n.useReducer)(m,i),a=Object(o.a)(t,2),l=a[0],c=a[1],s=Object(n.useReducer)(b,d),g=Object(o.a)(s,2),v=g[0],_=g[1],O=Object(n.useReducer)(p,f),j=Object(o.a)(O,2),x=j[0],y=j[1],S=Object(n.useReducer)(h,E),w=Object(o.a)(S,2),k=w[0],C=w[1];return r.a.createElement("div",null,r.a.createElement(u.Provider,{value:{stateProp1:l.stateprop1,dispatchContextTrue:function(){c({type:"SUCCESS"})},dispatchContextFalse:function(){c({type:"FAILURE"})},authState:v.is_authenticated,dbProfileState:v.db_profile,profileState:v.profile,handleAddDBProfile:function(e){return function(e){_(function(e){return{type:"SET_DB_PROFILE",payload:e}}(e))}(e)},handleRemoveDBProfile:function(){_({type:"REMOVE_DB_PROFILE"})},handleUserAddProfile:function(e){return function(e){_(function(e){return{type:"ADD_PROFILE",payload:e}}(e))}(e)},handleUserRemoveProfile:function(){_({type:"REMOVE_PROFILE"})},handleUserLogin:function(){_({type:"LOGIN_SUCCESS"})},handleUserLogout:function(){_({type:"LOGIN_FAILURE"})},useContextChangeState:x.user_textChange,useContextSubmitState:x.user_textSubmit,useContextSubmit:function(e){return function(e){e.preventDefault(),e.persist(),y({type:"USER_INPUT_SUBMIT",payload:e.target.useContext.value})}(e)},useContextChange:function(e){return function(e){y({type:"USER_INPUT_CHANGE",payload:e.target.value})}(e)},resourcesState:k.resources,handleAddResources:function(e){return function(e){C(function(e){return{type:"FETCH_DB_RESOURCES",payload:e}}(e))}(e)},handleRemoveResources:function(){C({type:"REMOVE_DB_RESOURCES"})},handleAuth:function(e){return function(e){e.location.hash&&ue.handleAuth()}(e)},authObj:ue}},r.a.createElement(le,null)))},ie=function(){return r.a.createElement("div",null,r.a.createElement(se,null))};a(105),a(106),a(107);c.a.render(r.a.createElement(ie,null),document.getElementById("root"))},79:function(e,t,a){e.exports=a(108)}},[[79,1,2]]]);
//# sourceMappingURL=main.7ac179cc.chunk.js.map